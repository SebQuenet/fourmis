(this.webpackJsonpfourmis=this.webpackJsonpfourmis||[]).push([[0],{13:function(e,t,i){e.exports={canvasSupport:"AntHill_canvasSupport__1XU9R"}},19:function(e,t,i){},28:function(e,t,i){},29:function(e,t,i){"use strict";i.r(t);for(var a,o=i(3),n=i(4),r=i.n(n),l=i(11),s=i.n(l),c=(i(19),i(5)),d=i(0),h=i(1),f=i(31),y=i(2),u=i(9),x=i.n(u),M=(i(28),i(12)),b=i(13),g=i.n(b),m=4e3,k=2e3,S=function(e){var t=Object(n.useRef)(null),i=e.draw,a=e.handleClick,r=e.handleMouseMove;return Object(n.useEffect)((function(){var e,o=t.current,n=o.getContext("2d"),l=0;o.addEventListener("mousemove",(function(e){var t=o.getBoundingClientRect().width,i=o.getBoundingClientRect().height,a=e.clientX*m/t,n=e.clientY*k/i;r({canvasX:a,canvasY:n})}),!1),o.addEventListener("click",(function(e){var t=o.getBoundingClientRect().width,i=o.getBoundingClientRect().height,n=e.clientX*m/t,r=e.clientY*k/i;a({canvasX:n,canvasY:r})}),!1);return function t(){l++,i(n,l),e=window.requestAnimationFrame(t)}(),function(){window.cancelAnimationFrame(e)}}),[i]),console.log(window.innerWidth/2),console.log(window.innerHeight/2),Object(o.jsx)("canvas",Object(M.a)({width:m,height:k,className:g.a.canvasSupport,ref:t},e))},p=function(e,t){e.strokeStyle="#331111",$.forEach((function(t){e.beginPath(),e.fillRect(t.x,t.y,1,1)})),t.forEach((function(t){if(e.beginPath(),"elderly"===t.maturity){var i=y.hex.hsl(t.color.substring(1)),a=Object(c.a)(i,3),o=a[0],n=a[1],r=a[2];e.fillStyle="#".concat(y.hsl.hex(o,n/2,r-10))}else e.fillStyle=t.color;e.ellipse(t.x,t.y,O[t.maturity].size*t.size*2,O[t.maturity].size*t.size+O[t.maturity].size*t.size*Math.abs(t.oscillator),t.direction,0,2*Math.PI),e.fill(),R&&t.bredRest>0&&(e.strokeStyle="#ffffff",e.lineWidth=1,e.stroke()),L&&(t.food<500?(e.strokeStyle="#ff0000",e.lineWidth=3,e.stroke()):t.food<1e3?(e.strokeStyle="#ffff00",e.lineWidth=3,e.stroke()):t.food<2e3&&(e.strokeStyle="#00ff00",e.lineWidth=3,e.stroke())),t.isInjuried&&(e.beginPath(),e.fillStyle="#ff0000",e.ellipse(t.x,t.y,O[t.maturity].size*t.size*2,O[t.maturity].size*t.size+O[t.maturity].size*t.size*Math.abs(t.oscillator),t.direction,Math.PI-Math.PI/3,Math.PI+Math.PI/3),e.fill()),e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x+Math.cos(t.direction)*O[t.maturity].size*t.size*2,t.y+Math.sin(t.direction)*O[t.maturity].size*t.size*2),e.lineWidth=1,e.strokeStyle=t.color,e.stroke(),F&&function(e,t){e.strokeStyle=t.color,e.fillStyle=t.color,e.lineWidth=.5,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x+Math.cos(t.direction-Math.PI/6)*O[t.maturity].size*t.size*10,t.y+Math.sin(t.direction-Math.PI/6)*O[t.maturity].size*t.size*10),e.lineWidth=1,e.strokeStyle=t.color,e.stroke(),e.lineWidth=.5,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x+Math.cos(t.direction+Math.PI/6)*O[t.maturity].size*t.size*10,t.y+Math.sin(t.direction+Math.PI/6)*O[t.maturity].size*t.size*10),e.lineWidth=1,e.strokeStyle=t.color,e.stroke()}(e,t),!B||"adult"!==t.maturity&&"elderly"!==t.maturity&&"child"!==t.maturity&&"baby"!==t.maturity||function(e,t){var i=y.hex.hsl(t.color.substring(1)),a=Object(c.a)(i,3);a[0],a[1],a[2],e.beginPath(),e.fillStyle="#ffffff",e.arc(t.x+Math.cos(t.direction+Math.PI/6)*O[t.maturity].size*t.size,t.y+Math.sin(t.direction+Math.PI/6)*O[t.maturity].size*t.size,4,0,2*Math.PI),e.arc(t.x+Math.cos(t.direction-Math.PI/6)*O[t.maturity].size*t.size,t.y+Math.sin(t.direction-Math.PI/6)*O[t.maturity].size*t.size,4,0,2*Math.PI),e.fill(),e.beginPath();var o,n=t.mode===P?2:3;switch(t.mode){case P:o="#000000";break;case v:o="#008000";break;case z:o="#ff0000";break;case A:o="#ff00ff";break;default:o="#000000"}e.fillStyle=o,e.arc(t.x+Math.cos(t.direction+Math.PI/6)*O[t.maturity].size*t.size,t.y+Math.sin(t.direction+Math.PI/6)*O[t.maturity].size*t.size,n,0,2*Math.PI),e.arc(t.x+Math.cos(t.direction-Math.PI/6)*O[t.maturity].size*t.size,t.y+Math.sin(t.direction-Math.PI/6)*O[t.maturity].size*t.size,n,0,2*Math.PI),e.fill()}(e,t),D&&(function(e,t){e.lineWidth=.25,e.strokeRect(t.x-t.sensorArea/2,t.y-t.sensorArea/2,t.sensorArea,t.sensorArea),e.font="16px monospace",e.fillStyle=t.color,e.fillText("".concat(Math.floor(t.sensorArea)),t.x-t.sensorArea/2,t.y-t.sensorArea/2),e.fillText("".concat(Math.floor(10*t.speed)),t.x+t.sensorArea/2-12,t.y-t.sensorArea/2),e.fillText("".concat(Math.floor(t.generation)),t.x,t.y-t.sensorArea/2)}(e,t),function(e,t){e.beginPath(),e.lineWidth=1,e.strokeStyle="#C0E0C0",e.arc(t.x,t.y,t.perceptionArea,0,2*Math.PI),e.stroke(),e.font="20px monospace",e.fillStyle="#C0E0C0",e.fillText("".concat(Math.floor(t.perceptionArea)),t.x-t.perceptionArea+5,t.y),e.beginPath(),e.lineWidth=1,e.strokeStyle="#E0C0C0",e.arc(t.x,t.y,t.trackingArea,0,2*Math.PI),e.stroke(),e.font="20px monospace",e.fillStyle="#E0C0C0",e.fillText("".concat(Math.floor(t.trackingArea)),t.x+t.trackingArea-30,t.y),e.beginPath(),e.lineWidth=1,e.strokeStyle="#E0C0D0",e.arc(t.x,t.y,t.pheromonsArea,0,2*Math.PI),e.stroke(),e.font="20px monospace",e.fillStyle="#E0C0D0",e.fillText("".concat(Math.floor(t.pheromonsArea)),t.x,t.y-t.pheromonsArea+5)}(e,t)),t.isSelected&&(e.beginPath(),e.strokeStyle="#ff8888",e.fillStyle="#ffffff",e.lineWidth=3,e.arc(t.x,t.y,O[t.maturity].size*t.size*3,0,2*Math.PI),e.stroke())}))},P="NORMAL_MODE",v="FLEEING_MODE",z="HUNTING_MODE",A="MATING_MODE",w="HEN_SIDE",C="VIPER_SIDE",T="FOX_SIDE",I=null,j=(a={},Object(h.a)(a,w,{side:w,color:"#995500",canKill:Object(h.a)({},C,!0)}),Object(h.a)(a,C,{side:C,color:"#44CC44",canKill:Object(h.a)({},T,!0)}),Object(h.a)(a,T,{side:T,color:"#CC4444",canKill:Object(h.a)({},w,!0)}),a),O={newborn:{size:2},baby:{size:4},child:{size:5},adult:{size:8},elderly:{size:7}},E=!0,F=!1,R=!1,D=!1,B=!0,W=!0,H=!0,G=!1,_=!1,N=!0,K=!0,X=!1,L=!1,q=!1,Y=!1,V=[[],[{x:100,y:1400,width:3800,height:10},{x:2e3,y:100,width:10,height:1300}],[{x:1900,y:0,width:200,height:950},{x:1900,y:1050,width:200,height:950}],[{x:2e3,y:0,width:10,height:2e3,isGate:!0},{x:0,y:1e3,width:4e3,height:10,isGate:!0}],[{x:2e3,y:0,width:10,height:2e3,isGate:!0},{x:1e3,y:1e3,width:2e3,height:10,isGate:!0},{x:1600,y:1e3,width:800,height:10},{x:1e3,y:600,width:10,height:800},{x:3e3,y:600,width:10,height:800},{x:1600,y:400,width:800,height:10},{x:1600,y:1600,width:800,height:10},{x:0,y:600,width:1e3,height:10},{x:3e3,y:1400,width:1e3,height:10}]],J=0,U=0,Q=function(e){var t=e.canvasX,i=e.canvasY;J=t,U=i},Z=V[Math.floor(Math.random()*V.length)],$=[],ee=function(e,t){return e.side===t.side},te=function(e,t){return function(e,t){return Math.abs(t.x-e.x)<30&&Math.abs(t.y-e.y)<30}(e,t)&&function(e,t){return e.id!==t.id}(e,t)},ie=function(e,t){return 0===e.bredRest&&0===t.bredRest},ae=function(e,t){return!!(q||"newborn"!==t.maturity&&"baby"!==t.maturity&&"child"!==t.maturity)&&("adult"===e.maturity&&j[e.side].canKill[t.side])},oe=function(e){return"adult"===e.maturity},ne=function(e){var t=e.side,i=e.x,a=e.y,o=t||function(){var e=Object.keys(j);return e[Math.floor(Math.random()*e.length)]}();return{id:Object(f.a)(),name:x()(),x:i||Math.floor(3600*Math.random())+200,y:a||Math.floor(1600*Math.random())+200,direction:Math.PI/2,food:4e3,speed:1,energy:2,hitPoints:100,maxHitPoints:100,strength:40,reach:30,damageReduction:5,sensorArea:80,trackingArea:80,pheromonsArea:120,perceptionArea:80,isTired:!1,color:j[t].color,canBreed:!1,bredRest:0,size:1,age:1,maturity:"child",generation:1,side:o}},re=[],le=0;le<30;le++)re=[].concat(Object(d.a)(re),[ne({side:C})]);for(var se=0;se<30;se++)re=[].concat(Object(d.a)(re),[ne({side:w})]);for(var ce=0;ce<30;ce++)re=[].concat(Object(d.a)(re),[ne({side:T})]);document.addEventListener("keydown",(function(e){"v"===e.key&&(re=[].concat(Object(d.a)(re),[ne({side:C})])),"V"===e.key&&(re=[].concat(Object(d.a)(re),[ne({side:C,x:J,y:U})])),"f"===e.key&&(re=[].concat(Object(d.a)(re),[ne({side:T})])),"F"===e.key&&(re=[].concat(Object(d.a)(re),[ne({side:T,x:J,y:U})])),"h"===e.key&&(re=[].concat(Object(d.a)(re),[ne({side:w})])),"H"===e.key&&(re=[].concat(Object(d.a)(re),[ne({side:w,x:J,y:U})])),"B"===e.key&&(H=!H),"b"===e.key&&(R=!R),"a"===e.key&&(E=!E),"s"===e.key&&(D=!D),"e"===e.key&&(B=!B),"k"===e.key&&(G=!G),"w"===e.key&&(W=!W),"d"===e.key&&(X=!X),"g"===e.key&&(_=!_),"o"===e.key&&(L=!L),"x"===e.key&&(K=!K),"c"===e.key&&(N=!N),"i"===e.key&&(q=!q)," "===e.key&&(Y=!Y),e.key,"K"===e.key&&(re=[]),"S"===e.key&&(re=re.filter((function(){return Math.random()>.5}))),">"===e.key&&(Z=V[Math.floor(Math.random()*V.length)])}),!1);var de=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))};var he=function(){re.forEach((function(e){re.forEach((function(t){te(e,t)&&(H&&ee(e,t)&&function(e,t){return e.canBreed&&t.canBreed}(e,t)&&ie(e,t)?function(e,t){e.bredRest=400,t.bredRest=400;var i=y.hex.rgb(e.color.substring(1)),a=Object(c.a)(i,3),o=a[0],n=a[1],r=a[2],l=y.hex.rgb(t.color.substring(1)),s=Object(c.a)(l,3),h=s[0],u=s[1],M=s[2];e.brood=100,t.brood=100;var b=[Math.floor(Math.sqrt((o*o+h*h)/2)),Math.floor(Math.sqrt((n*n+u*u)/2)),Math.floor(Math.sqrt((r*r+M*M)/2))],g=y.rgb.hsl(b),m=Object(c.a)(g,3),k=m[0],S=m[1],p=m[2];S=Math.floor(S+Math.random(10)-5),p=Math.floor(p+Math.random(10)-5);var v=Math.floor(e.speed+t.speed)/2-.5+Math.random(),z=Math.floor(Math.floor(e.sensorArea+t.sensorArea)/2-4+8*Math.random()),A=Math.floor(Math.floor(e.trackingArea+t.trackingArea)/2-4+8*Math.random()),w=Math.floor(Math.floor(e.perceptionArea+t.perceptionArea)/2-4+8*Math.random()),C=Math.floor(Math.floor(e.pheromonsArea+t.pheromonsArea)/2-4+8*Math.random()),T=Math.floor(e.size+t.size)/2-.2+.4*Math.random(),I={id:Object(f.a)(),name:x()(),x:Math.floor(e.x+t.x)/2,y:Math.floor(e.y+t.y)/2,direction:0,brood:0,sensorArea:z>80?z:80,trackingArea:A>0?A:0,perceptionArea:w>0?w:0,pheromonsArea:C>0?C:0,speed:v>1?v:1,energy:2,hitPoints:Math.floor((e.hitPoints+t.hitPoints)/2+10*Math.random()-5),maxHitPoints:Math.floor(e.maxHitPoints+t.maxHitPoints)/2,strength:Math.floor((e.strength+t.strength)/2+4*Math.random()-2),reach:Math.floor((e.reach+t.reach)/2+4*Math.random()-2),damageReduction:Math.floor((e.damageReduction+t.damageReduction)/2),color:"#".concat(y.hsl.hex([k,S,p])),canBreed:!1,hasBred:!1,mode:P,size:T>1?T:1,age:0,bredRest:0,generation:e.generation>t.generation?e.generation+1:t.generation+1,food:Math.floor(e.food+t.food)/2+700,side:e.side};re=[].concat(Object(d.a)(re),[I])}(e,t):ee(e,t)||function(e,t){return!!(q||"newborn"!==t.maturity&&"baby"!==t.maturity&&"child"!==t.maturity)&&!(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))>e.reach)&&"adult"===e.maturity&&j[e.side].canKill[t.side]}(e,t)&&oe(e)&&(t.hitPoints=t.hitPoints-e.strength,t.hitPoints<=0?(t.isDead=!0,$.push({x:t.x,y:t.y}),e.food=e.food+t.food):t.isInjuried=!0))}))}))},fe=function(e){var t=e.canvasX,i=e.canvasY;console.log(I),re.forEach((function(e){return!1===e.isSelected})),console.log(re.find((function(e){return e.isSelected}))),re.forEach((function(e){e.maturity?t>=e.x-3*O[e.maturity].size&&t<=e.x+3*O[e.maturity].size&&i>=e.y-3*O[e.maturity].size&&i<=e.y+3*O[e.maturity].size?(console.log(e),e.isSelected=!0,I=e):I=null:console.log("No maturity for ant",e)}))};var ye=function(){return Object(o.jsx)("div",{className:"App",children:Object(o.jsx)(S,{draw:function(e,t){Y||(e.beginPath(),e.fillStyle="#202020",e.fillRect(0,0,e.canvas.width,e.canvas.height),function(e){e.font="36px serif",e.fillStyle="#ffffff";var t=re.filter((function(e){return e.side===T})).length,i=re.filter((function(e){return e.side===C})).length,a=re.filter((function(e){return e.side===w})).length;X?(e.fillStyle="#00FF00",e.fillText("Display debug (d) enabled",30,40),e.fillStyle="#CC4444",e.fillText("".concat(t," foxes, (f) to add (F) on cursor"),30,80),e.fillStyle="#995500",e.fillText("".concat(a," hens, (h) to add (H) on cursor"),30,120),e.fillStyle="#44CC44",e.fillText("".concat(i," vipers, (v) to add (V) on cursor"),30,160),G?(e.fillStyle="#FF0000",e.fillText("Prey mode (k) enabled",30,200)):(e.fillStyle="#808080",e.fillText("Prey mode (k) disabled",30,200)),_?(e.fillStyle="#CCCCCC",e.fillText("Gate (g) enabled",30,240)):(e.fillStyle="#808080",e.fillText("Gate (g) disabled",30,240)),E?(e.fillStyle="#CCCCCC",e.fillText("Ants (a) displayed",30,280)):(e.fillStyle="#808080",e.fillText("Ants (a) hidden",30,280)),L?(e.fillStyle="#CCCCCC",e.fillText("Food (o) displayed",30,320)):(e.fillStyle="#808080",e.fillText("Food (o) hidden",30,320)),K?(e.fillStyle="#FF0000",e.fillText("Die on starvation (x) enabled",30,360)):(e.fillStyle="#808080",e.fillText("Die on starvation (x) disabled",30,360)),N?(e.fillStyle="#FF0000",e.fillText("Die on aging (c) enabled",30,400)):(e.fillStyle="#808080",e.fillText("Die on aging (c) disabled",30,400)),D?(e.fillStyle="#CCCC33",e.fillText("Sensor (s) displayed",30,440)):(e.fillStyle="#808080",e.fillText("Sensor (s) displayed",30,440)),q?(e.fillStyle="#FF0000",e.fillText("Allow to kill children (i) enabled",30,480)):(e.fillStyle="#808080",e.fillText("Allow to kill children (i) disabled",30,480)),H?(e.fillStyle="#00FF00",e.fillText("Allow to breed (B) enabled",30,520)):(e.fillStyle="#FF0000",e.fillText("Allow to breed (B) disabled",30,520)),e.fillStyle="#880000",e.fillText("Kill everybody, (K)",30,560),e.fillStyle="#808080",e.fillText("Randomize walls, (>)",30,600),e.fillStyle="#880000",e.fillText("Snap, (S)",30,640)):(e.fillStyle="#808080",e.fillText("Display debug (d) disabled",30,40))}(e),function(e){re.forEach((function(t){t.oscillator=Math.cos(e/10),t.hitPoints<t.maxHitPoints&&(t.hitPoints+=.25,t.hitPoints>=t.maxHitPoints&&(t.isInjuried=!1)),t.bredRest>0&&(t.bredRest=t.bredRest-1),t.age=t.age+1,t.age<200?t.maturity="newborn":t.age<400?t.maturity="baby":t.age<1200?t.maturity="child":t.age<8e3?(t.maturity="adult",t.canBreed=!0):t.age<1e4&&N?(t.maturity="elderly",t.canBreed=!1,t.energy=5):N&&(t.isDead=!0)}))}(t),re.forEach((function(e){e.food=e.food-1,e.food<=0&&K&&(e.isDead=!0)})),re=re.filter((function(e){return!e.isDead})),function(e){W&&Z.forEach((function(t){t.isGate&&!_?e.fillStyle="#333333":e.fillStyle="#888888",e.fillRect(t.x,t.y,t.width,t.height)}))}(e),E&&p(e,re),re.forEach((function(e){e.brood>0?(e.brood=e.brood-1,e.isTired=!0):e.isTired=!1})),re.forEach((function(e){e.mode=P,e.preys=re.filter((function(t){return de(e,t)<e.trackingArea&&t.id!==e.id&&ae(e,t)})),e.predators=re.filter((function(t){return de(e,t)<e.perceptionArea&&t.id!==e.id&&ae(e,t)})),e.mates=re.filter((function(t){return de(e,t)<e.pheromonsArea&&t.id!==e.id&&H&&ee(e,t)&&ie(e,t)&&oe(e)}))})),re.forEach((function(e){if(!e.isTired){e.mode=P;var t=re.filter((function(t){return Math.abs(t.x-e.x)<e.sensorArea&&Math.abs(t.y-e.y)<e.sensorArea&&t.id!==e.id})),i=t.filter((function(t){return oe(t)&&t.id!==e.id})),a=i.filter((function(t){return H&&ee(e,t)&&ie(e,t)&&oe(e)}));if(a.length>0){var o=a[0];e.direction=Math.atan2(o.y-e.y,o.x-e.x),e.mode=A}var n=i.filter((function(t){return ae(t,e)}));if(n.length>0){var r=n[0];e.direction=Math.PI+Math.atan2(r.y-e.y,r.x-e.x),e.mode=v}if(G||e.food<1e3){var l=t.filter((function(t){return ae(e,t)}));if(l.length>0){var s=l[0];e.direction=Math.atan2(s.y-e.y,s.x-e.x),e.mode=z}}e.x>4e3&&(e.direction=Math.PI),e.x<0&&(e.direction=0),e.y>2e3&&(e.direction=3*Math.PI/2),e.y<0&&(e.direction=Math.PI/2),e.direction=-Math.PI/18+Math.random()*Math.PI/9+e.direction}})),re.forEach((function(e){if(!e.isTired){var t;switch(e.maturity){case"newborn":t=0;break;case"baby":t=1;break;case"child":t=2;break;case"adult":t=3;break;case"elderly":t=1;break;default:t=1}var i=e.isInjuried?2/3:1,a=e.x+Math.cos(e.direction)*e.speed*t*i,o=e.y+Math.sin(e.direction)*e.speed*t*i,n=!1;Z.forEach((function(t){if(t.isGate&&!_)return e.x=a,void(e.y=o);a>=t.x&&a<=t.x+t.width&&o>=t.y&&o<=t.y+t.height&&(e.direction=Math.PI+e.direction,n=!0)})),n||(e.x=a,e.y=o)}})),he(),function(e){null!==I&&(e.beginPath(),e.strokeStyle="#FFFF00",e.lineWidth=2,e.fillStyle="#000000",e.rect(3e3,0,1e3,1e3),e.fill(),e.stroke())}(e))},handleClick:fe,handleMouseMove:Q})})},ue=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,32)).then((function(t){var i=t.getCLS,a=t.getFID,o=t.getFCP,n=t.getLCP,r=t.getTTFB;i(e),a(e),o(e),n(e),r(e)}))};s.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(ye,{})}),document.getElementById("root")),ue()}},[[29,1,2]]]);
//# sourceMappingURL=main.a3e1844e.chunk.js.map