(this.webpackJsonpfourmis=this.webpackJsonpfourmis||[]).push([[0],{15:function(e,t,i){},24:function(e,t,i){},25:function(e,t,i){"use strict";i.r(t);for(var o,n=i(1),r=i(3),a=i.n(r),l=i(7),s=i.n(l),d=(i(15),i(4)),c=i(0),f=i(27),h=i(2),y=(i(24),i(8)),u=i(9),b=i.n(u),x=function(e){var t=Object(r.useRef)(null),i=e.draw;Object(r.useEffect)((function(){var e,o=t.current.getContext("2d"),n=0;return function t(){n++,i(o,n),e=window.requestAnimationFrame(t)}(),function(){window.cancelAnimationFrame(e)}}),[i]),console.log(window.innerWidth/2),console.log(window.innerHeight/2);return Object(n.jsx)("canvas",Object(y.a)({width:4e3,height:2e3,className:b.a.canvasSupport,ref:t},e))},M=function(e,t){e.strokeStyle="#331111",N.forEach((function(t){e.beginPath(),e.fillRect(t.x,t.y,1,1)})),t.forEach((function(t){if(e.beginPath(),"elderly"===t.maturity){var i=h.hex.hsl(T[t.side].color.substring(1)),o=Object(d.a)(i,3),n=o[0],r=o[1],a=o[2];e.fillStyle="#".concat(h.hsl.hex(n,r/2,a-10))}else e.fillStyle=T[t.side].color;e.ellipse(t.x,t.y,2*t.size,t.size+t.size*Math.abs(t.oscillator),t.direction,0,2*Math.PI),e.fill(),I&&t.bredRest>0&&(e.strokeStyle="#ffffff",e.lineWidth=1,e.stroke()),G&&(t.food<500?(e.strokeStyle="#ff0000",e.lineWidth=3,e.stroke()):t.food<1e3?(e.strokeStyle="#ffff00",e.lineWidth=3,e.stroke()):t.food<2e3&&(e.strokeStyle="#00ff00",e.lineWidth=3,e.stroke())),e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x+Math.cos(t.direction)*t.size*2,t.y+Math.sin(t.direction)*t.size*2),e.lineWidth=1,e.strokeStyle=T[t.side].color,e.stroke(),w&&function(e,t){e.strokeStyle=T[t.side].color,e.fillStyle=T[t.side].color,e.lineWidth=.5,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x+Math.cos(t.direction-Math.PI/6)*t.size*10,t.y+Math.sin(t.direction-Math.PI/6)*t.size*10),e.lineWidth=1,e.strokeStyle=T[t.side].color,e.stroke(),e.lineWidth=.5,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x+Math.cos(t.direction+Math.PI/6)*t.size*10,t.y+Math.sin(t.direction+Math.PI/6)*t.size*10),e.lineWidth=1,e.strokeStyle=T[t.side].color,e.stroke()}(e,t),!A||"adult"!==t.maturity&&"elderly"!==t.maturity&&"child"!==t.maturity&&"baby"!==t.maturity||function(e,t){var i=h.hex.hsl(T[t.side].color.substring(1)),o=Object(d.a)(i,3);o[0],o[1],o[2],e.beginPath(),e.fillStyle="#ffffff",e.arc(t.x+Math.cos(t.direction+Math.PI/6)*t.size,t.y+Math.sin(t.direction+Math.PI/6)*t.size,4,0,2*Math.PI),e.arc(t.x+Math.cos(t.direction-Math.PI/6)*t.size,t.y+Math.sin(t.direction-Math.PI/6)*t.size,4,0,2*Math.PI),e.fill(),e.beginPath();var n,r=t.mode===g?2:3;switch(t.mode){case g:n="#000000";break;case S:n="#008000";break;case k:n="#ff0000";break;case m:n="#ff00ff";break;default:n="#000000"}e.fillStyle=n,e.arc(t.x+Math.cos(t.direction+Math.PI/6)*t.size,t.y+Math.sin(t.direction+Math.PI/6)*t.size,r,0,2*Math.PI),e.arc(t.x+Math.cos(t.direction-Math.PI/6)*t.size,t.y+Math.sin(t.direction-Math.PI/6)*t.size,r,0,2*Math.PI),e.fill()}(e,t),O&&function(e,t){e.lineWidth=.25,e.strokeRect(t.x-t.sensorArea/2,t.y-t.sensorArea/2,t.sensorArea,t.sensorArea),e.font="16px monospace",e.fillStyle=T[t.side].color,e.fillText("".concat(Math.floor(t.sensorArea)),t.x-t.sensorArea/2,t.y-t.sensorArea/2),e.fillText("".concat(Math.floor(10*t.speed)),t.x+t.sensorArea/2-12,t.y-t.sensorArea/2),e.fillText("".concat(Math.floor(t.generation)),t.x,t.y-t.sensorArea/2)}(e,t)}))},g="NORMAL_MODE",S="FLEEING_MODE",k="HUNTING_MODE",m="MATING_MODE",p="HEN_SIDE",v="VIPER_SIDE",C="FOX_SIDE",T=(o={},Object(c.a)(o,p,{side:p,color:"#995500",canKill:Object(c.a)({},v,!0)}),Object(c.a)(o,v,{side:v,color:"#44CC44",canKill:Object(c.a)({},C,!0)}),Object(c.a)(o,C,{side:C,color:"#CC4444",canKill:Object(c.a)({},p,!0)}),o),P=!0,w=!1,I=!1,O=!1,A=!0,j=!0,E=!1,z=!1,F=!0,D=!0,R=!1,G=!1,W=!1,_=[[],[{x:2e3,y:0,width:10,height:2e3,isGate:!0},{x:0,y:1e3,width:4e3,height:10,isGate:!0}],[{x:2e3,y:0,width:10,height:2e3,isGate:!0},{x:1e3,y:1e3,width:2e3,height:10,isGate:!0},{x:1600,y:1e3,width:800,height:10},{x:1e3,y:600,width:10,height:800},{x:3e3,y:600,width:10,height:800},{x:1600,y:400,width:800,height:10},{x:1600,y:1600,width:800,height:10},{x:0,y:600,width:1e3,height:10},{x:3e3,y:1400,width:1e3,height:10}]],B=_[Math.floor(Math.random()*_.length)],N=[],K=function(e,t){return e.side===t.side},H=function(e,t){return function(e,t){return Math.abs(t.x-e.x)<30&&Math.abs(t.y-e.y)<30}(e,t)&&function(e,t){return e.id!==t.id}(e,t)},L=function(e,t){return 0===e.bredRest&&0===t.bredRest},q=function(e,t){return!!(W||"newborn"!==t.maturity&&"baby"!==t.maturity&&"child"!==t.maturity)&&("adult"===e.maturity&&T[e.side].canKill[t.side])},X=function(e){return"adult"===e.maturity},J=function(){var e=Object.keys(T);return e[Math.floor(Math.random()*e.length)]},U=function(e){var t=e.side;return{id:Object(f.a)(),x:Math.floor(3600*Math.random())+200,y:Math.floor(1600*Math.random())+200,direction:Math.PI/2,food:4e3,speed:1,energy:2,sensorArea:80,isTired:!1,color:"#44CCCC",canBreed:!1,bredRest:0,size:1,age:1,maturity:"child",generation:1,side:t||J()}},V=[],Q=0;Q<30;Q++)V.push(U({side:v}));for(var Y=0;Y<30;Y++)V.push(U({side:p}));for(var Z=0;Z<30;Z++)V.push(U({side:C}));document.addEventListener("keydown",(function(e){"v"===e.key&&V.push(U({side:v})),"f"===e.key&&V.push(U({side:C})),"h"===e.key&&V.push(U({side:p})),"b"===e.key&&(I=!I),"a"===e.key&&(P=!P),"s"===e.key&&(O=!O),"e"===e.key&&(A=!A),"k"===e.key&&(E=!E),"w"===e.key&&(j=!j),"d"===e.key&&(R=!R),"g"===e.key&&(z=!z),"o"===e.key&&(G=!G),"x"===e.key&&(D=!D),"c"===e.key&&(F=!F),"i"===e.key&&(W=!W)}),!1);var $=function(){V.forEach((function(e){V.forEach((function(t){H(e,t)&&(K(e,t)&&function(e,t){return e.canBreed&&t.canBreed}(e,t)&&L(e,t)?function(e,t){e.bredRest=400,t.bredRest=400;var i=h.hex.rgb(e.color.substring(1)),o=Object(d.a)(i,3),n=o[0],r=o[1],a=o[2],l=h.hex.rgb(t.color.substring(1)),s=Object(d.a)(l,3),c=s[0],y=s[1],u=s[2];e.brood=100,t.brood=100;var b=[Math.floor(Math.sqrt((n*n+c*c)/2)),Math.floor(Math.sqrt((r*r+y*y)/2)),Math.floor(Math.sqrt((a*a+u*u)/2))],x=Math.floor(e.speed+t.speed)/2-.5+Math.random(),M=Math.floor(Math.floor(e.sensorArea+t.sensorArea)/2-4+8*Math.random()),S={id:Object(f.a)(),x:Math.floor(e.x+t.x)/2,y:Math.floor(e.y+t.y)/2,direction:0,brood:0,sensorArea:M>80?M:80,speed:x>1?x:1,energy:2,color:"#".concat(h.rgb.hex(b)),canBreed:!1,hasBred:!1,mode:g,size:1,age:0,bredRest:0,generation:e.generation>t.generation?e.generation+1:t.generation+1,food:Math.floor(e.food+t.food)/2+600,side:e.side};V.push(S)}(e,t):K(e,t)||q(e,t)&&X(e)&&(t.isDead=!0,N.push({x:t.x,y:t.y}),e.food=e.food+1500))}))}))};var ee=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(x,{draw:function(e,t){e.beginPath(),e.fillStyle="#202020",e.fillRect(0,0,e.canvas.width,e.canvas.height),function(e){e.font="36px serif",e.fillStyle="#ffffff";var t=V.filter((function(e){return e.side===C})).length,i=V.filter((function(e){return e.side===v})).length,o=V.filter((function(e){return e.side===p})).length;R?(e.fillStyle="#00FF00",e.fillText("Display debug (D) enabled",30,40),e.fillStyle="#CC4444",e.fillText("".concat(t," foxes, (F) to add"),30,80),e.fillStyle="#995500",e.fillText("".concat(o," hens, (H) to add"),30,120),e.fillStyle="#44CC44",e.fillText("".concat(i," vipers, (V) to add"),30,160),E?(e.fillStyle="#FF0000",e.fillText("Prey mode (K) enabled",30,200)):(e.fillStyle="#808080",e.fillText("Prey mode (K) disabled",30,200)),z?(e.fillStyle="#CCCCCC",e.fillText("Gate (G) enabled",30,240)):(e.fillStyle="#808080",e.fillText("Gate (G) disabled",30,240)),P?(e.fillStyle="#CCCCCC",e.fillText("Ants (A) displayed",30,280)):(e.fillStyle="#808080",e.fillText("Ants (A) hidden",30,280)),G?(e.fillStyle="#CCCCCC",e.fillText("Food (O) displayed",30,320)):(e.fillStyle="#808080",e.fillText("Food (O) hidden",30,320)),D?(e.fillStyle="#FF0000",e.fillText("Die on starvation (X) enabled",30,360)):(e.fillStyle="#808080",e.fillText("Die on starvation (X) disabled",30,360)),F?(e.fillStyle="#FF0000",e.fillText("Die on aging (C) enabled",30,400)):(e.fillStyle="#808080",e.fillText("Die on aging (C) disabled",30,400)),O?(e.fillStyle="#CCCC33",e.fillText("Sensor (S) displayed",30,440)):(e.fillStyle="#808080",e.fillText("Sensor (S) displayed",30,440)),W?(e.fillStyle="#FF0000",e.fillText("Allow to kill children (I) enabled",30,480)):(e.fillStyle="#808080",e.fillText("Allow to kill children (I) disabled",30,480))):(e.fillStyle="#808080",e.fillText("Display debug (D) disabled",30,40))}(e),function(e){V.forEach((function(t){t.oscillator=Math.cos(e/10),t.bredRest>0&&(t.bredRest=t.bredRest-1),t.age=t.age+1,t.age<200?(t.maturity="newborn",t.size=2):t.age<400?(t.maturity="baby",t.size=4):t.age<1200?(t.maturity="child",t.size=5):t.age<8e3?(t.maturity="adult",t.size=8,t.canBreed=!0):t.age<1e4&&F?(t.maturity="elderly",t.size=7,t.canBreed=!1,t.energy=5):F&&(t.isDead=!0)}))}(t),V.forEach((function(e){e.food=e.food-1,e.food<=0&&D&&(e.isDead=!0)})),V=V.filter((function(e){return!e.isDead})),function(e){j&&B.forEach((function(t){t.isGate&&!z?e.fillStyle="#333333":e.fillStyle="#888888",e.fillRect(t.x,t.y,t.width,t.height)}))}(e),P&&M(e,V),V.forEach((function(e){e.brood>0?(e.brood=e.brood-1,e.isTired=!0):e.isTired=!1})),V.forEach((function(e){if(!e.isTired){e.mode=g;var t=V.filter((function(t){return Math.abs(t.x-e.x)<e.sensorArea&&Math.abs(t.y-e.y)<e.sensorArea&&t.id!==e.id})),i=t.filter((function(t){return X(t)&&t.id!==e.id})),o=i.filter((function(t){return q(t,e)}));if(o.length>0){var n=o[0];e.direction=Math.PI+Math.atan2(n.y-e.y,n.x-e.x),e.mode=S}var r=i.filter((function(t){return K(e,t)&&L(e,t)&&X(e)}));if(r.length>0){var a=r[0];e.direction=Math.atan2(a.y-e.y,a.x-e.x),e.mode=m}if(E||e.food<1e3){var l=t.filter((function(t){return q(e,t)}));if(l.length>0){var s=l[0];e.direction=Math.atan2(s.y-e.y,s.x-e.x),e.mode=k}}e.x>4e3&&(e.direction=Math.PI),e.x<0&&(e.direction=0),e.y>2e3&&(e.direction=3*Math.PI/2),e.y<0&&(e.direction=Math.PI/2),e.direction=-Math.PI/18+Math.random()*Math.PI/9+e.direction}})),V.forEach((function(e){if(!e.isTired){var t;switch(e.maturity){case"newborn":t=0;break;case"baby":t=1;break;case"child":t=2;break;case"adult":t=3;break;case"elderly":t=1;break;default:t=1}var i=e.x+Math.cos(e.direction)*e.speed*t,o=e.y+Math.sin(e.direction)*e.speed*t,n=!1;B.forEach((function(t){if(t.isGate&&!z)return e.x=i,void(e.y=o);i>=t.x&&i<=t.x+t.width&&o>=t.y&&o<=t.y+t.height&&(e.direction=Math.PI+e.direction,n=!0)})),n||(e.x=i,e.y=o)}})),$()}})})},te=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,28)).then((function(t){var i=t.getCLS,o=t.getFID,n=t.getFCP,r=t.getLCP,a=t.getTTFB;i(e),o(e),n(e),r(e),a(e)}))};s.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(ee,{})}),document.getElementById("root")),te()},9:function(e,t,i){e.exports={canvasSupport:"AntHill_canvasSupport__1XU9R"}}},[[25,1,2]]]);
//# sourceMappingURL=main.4ef39e5e.chunk.js.map