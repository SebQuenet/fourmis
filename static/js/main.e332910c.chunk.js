(this.webpackJsonpfourmis=this.webpackJsonpfourmis||[]).push([[0],{15:function(e,t,i){},24:function(e,t,i){},25:function(e,t,i){"use strict";i.r(t);for(var n,r=i(1),a=i(3),o=i.n(a),c=i(7),s=i.n(c),l=(i(15),i(4)),d=i(0),h=i(27),f=i(2),u=(i(24),i(8)),y=i(9),M=i.n(y),b=function(e){var t=Object(a.useRef)(null),i=e.draw;Object(a.useEffect)((function(){var e,n=t.current.getContext("2d"),r=0;return function t(){r++,i(n,r),e=window.requestAnimationFrame(t)}(),function(){window.cancelAnimationFrame(e)}}),[i]),console.log(window.innerWidth/2),console.log(window.innerHeight/2);return Object(r.jsx)("canvas",Object(u.a)({width:4e3,height:2e3,className:M.a.canvasSupport,ref:t},e))},x=function(e,t){e.strokeStyle="#331111",D.forEach((function(t){e.beginPath(),e.fillRect(t.x,t.y,1,1)})),t.forEach((function(t){if(e.beginPath(),"elderly"===t.maturity){var i=f.hex.hsl(O[t.side].color.substring(1)),n=Object(l.a)(i,3),r=n[0],a=n[1],o=n[2];e.fillStyle="#".concat(f.hsl.hex(r,a/2,o-10))}else e.fillStyle=O[t.side].color;e.ellipse(t.x,t.y,2*t.size,t.size+t.size*Math.abs(t.oscillator),t.direction,0,2*Math.PI),e.fill(),w&&t.bredRest>0&&(e.strokeStyle="#ffffff",e.lineWidth=1,e.stroke()),e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x+Math.cos(t.direction)*t.size*2,t.y+Math.sin(t.direction)*t.size*2),e.lineWidth=1,e.strokeStyle=O[t.side].color,e.stroke(),j&&function(e,t){e.strokeStyle=O[t.side].color,e.fillStyle=O[t.side].color,e.lineWidth=.5,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x+Math.cos(t.direction-Math.PI/6)*t.size*10,t.y+Math.sin(t.direction-Math.PI/6)*t.size*10),e.lineWidth=1,e.strokeStyle=O[t.side].color,e.stroke(),e.lineWidth=.5,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x+Math.cos(t.direction+Math.PI/6)*t.size*10,t.y+Math.sin(t.direction+Math.PI/6)*t.size*10),e.lineWidth=1,e.strokeStyle=O[t.side].color,e.stroke()}(e,t),E&&"adult"===t.maturity&&function(e,t){var i=f.hex.hsl(O[t.side].color.substring(1)),n=Object(l.a)(i,3);n[0],n[1],n[2],e.beginPath(),e.fillStyle="#ffffff",e.arc(t.x+Math.cos(t.direction+Math.PI/6)*t.size,t.y+Math.sin(t.direction+Math.PI/6)*t.size,4,0,2*Math.PI),e.arc(t.x+Math.cos(t.direction-Math.PI/6)*t.size,t.y+Math.sin(t.direction-Math.PI/6)*t.size,4,0,2*Math.PI),e.fill(),e.beginPath();var r,a=t.mode===p?2:3;switch(t.mode){case p:r="#000000";break;case P:r="#008000";break;case m:r="#ff0000";break;case v:r="#ff00ff";break;default:r="#000000"}e.fillStyle=r,e.arc(t.x+Math.cos(t.direction+Math.PI/6)*t.size,t.y+Math.sin(t.direction+Math.PI/6)*t.size,a,0,2*Math.PI),e.arc(t.x+Math.cos(t.direction-Math.PI/6)*t.size,t.y+Math.sin(t.direction-Math.PI/6)*t.size,a,0,2*Math.PI),e.fill()}(e,t),z&&function(e,t){e.lineWidth=.25,e.strokeRect(t.x-g/2,t.y-g/2,g,g)}(e,t)}))},g=80,p="NORMAL_MODE",P="FLEEING_MODE",m="HUNTING_MODE",v="MATING_MODE",I="HEN_SIDE",k="VIPER_SIDE",S="FOX_SIDE",O=(n={},Object(d.a)(n,I,{side:I,color:"#995500",canKill:Object(d.a)({},k,!0)}),Object(d.a)(n,k,{side:k,color:"#44CC44",canKill:Object(d.a)({},S,!0)}),Object(d.a)(n,S,{side:S,color:"#CC4444",canKill:Object(d.a)({},I,!0)}),n),j=!1,w=!1,z=!1,E=!0,R=!0,T=!1,C=!1,D=[],F=[{x:1600,y:1e3,width:800,height:10},{x:1e3,y:600,width:10,height:800},{x:3e3,y:600,width:10,height:800},{x:1600,y:400,width:800,height:10},{x:1600,y:1600,width:800,height:10}],_=function(e,t){return e.side===t.side},B=function(e,t){return function(e,t){return Math.abs(t.x-e.x)<30&&Math.abs(t.y-e.y)<30}(e,t)&&function(e,t){return e.id!==t.id}(e,t)},W=function(e,t){return 0===e.bredRest&&0===t.bredRest},N=function(e,t){return"adult"===e.maturity&&O[e.side].canKill[t.side]},A=function(e){return"adult"===e.maturity},K=function(){var e=Object.keys(O);return e[Math.floor(Math.random()*e.length)]},L=function(e){var t=e.side;return{id:Object(h.a)(),x:Math.floor(3600*Math.random())+200,y:Math.floor(1600*Math.random())+200,direction:Math.PI/2,speed:1,energy:2,isTired:!1,color:"#44CCCC",canBreed:!1,bredRest:0,size:1,age:1,maturity:"child",generation:1,side:t||K()}},q=[],H=0;H<40;H++)q.push(L({side:k}));for(var G=0;G<40;G++)q.push(L({side:I}));for(var J=0;J<40;J++)q.push(L({side:S}));document.addEventListener("keydown",(function(e){"v"===e.key&&q.push(L({side:k})),"f"===e.key&&q.push(L({side:S})),"h"===e.key&&q.push(L({side:I})),"b"===e.key&&(w=!w),"a"===e.key&&(j=!j),"s"===e.key&&(z=!z),"e"===e.key&&(E=!E),"k"===e.key&&(T=!T),"w"===e.key&&(R=!R),"d"===e.key&&(C=!C)}),!1);var U=function(){q.forEach((function(e){q.forEach((function(t){B(e,t)&&(_(e,t)&&function(e,t){return e.canBreed&&t.canBreed}(e,t)&&W(e,t)?function(e,t){e.bredRest=800,t.bredRest=800;var i=f.hex.rgb(e.color.substring(1)),n=Object(l.a)(i,3),r=n[0],a=n[1],o=n[2],c=f.hex.rgb(t.color.substring(1)),s=Object(l.a)(c,3),d=s[0],u=s[1],y=s[2],M=[Math.floor(Math.sqrt((r*r+d*d)/2)),Math.floor(Math.sqrt((a*a+u*u)/2)),Math.floor(Math.sqrt((o*o+y*y)/2))],b={id:Object(h.a)(),x:Math.floor(e.x+t.x)/2,y:Math.floor(e.y+t.y)/2,direction:0,speed:Math.floor(e.speed+t.speed)/2,energy:2,color:"#".concat(f.rgb.hex(M)),canBreed:!1,hasBred:!1,mode:p,size:1,age:0,bredRest:0,generation:e.generation+1,side:e.side};q.push(b)}(e,t):_(e,t)||N(e,t)&&A(e)&&(t.isDead=!0,D.push({x:t.x,y:t.y})))}))}))};var X=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(b,{draw:function(e,t){e.beginPath(),e.fillStyle="#202020",e.fillRect(0,0,e.canvas.width,e.canvas.height),e.font="36px serif",e.fontWeight="bold",e.fillStyle="#ffffff";var i=q.filter((function(e){return e.side===S})).length,n=q.filter((function(e){return e.side===k})).length,r=q.filter((function(e){return e.side===I})).length;C?(e.fillStyle="#00FF00",e.fillText("Display debug (D) enabled",30,40),e.fillStyle="#CC4444",e.fillText("".concat(i," foxes"),30,80),e.fillStyle="#995500",e.fillText("".concat(r," hens"),30,120),e.fillStyle="#44CC44",e.fillText("".concat(n," vipers"),30,160),T?(e.fillStyle="#FF0000",e.fillText("Prey mode (K) enabled",30,200)):(e.fillStyle="#808080",e.fillText("Prey mode (K) disabled",30,200))):(e.fillStyle="#808080",e.fillText("Display debug (D) disabled",30,40)),function(e){q.forEach((function(t){t.oscillator=Math.cos(e/10),t.bredRest>0&&(t.bredRest=t.bredRest-1),t.age=t.age+1,t.age<100?(t.maturity="newborn",t.size=1,t.speed=0):t.age<200?(t.maturity="baby",t.size=2,t.speed=1):t.age<600?(t.maturity="child",t.size=3,t.speed=2):t.age<4e3?(t.maturity="adult",t.size=8,t.canBreed=!0,t.speed=3):t.age<5e3?(t.maturity="elderly",t.size=5,t.canBreed=!1,t.speed=1,t.energy=5,t.speed=1):t.isDead=!0}))}(t),q=q.filter((function(e){return!e.isDead})),function(e){R&&F.forEach((function(t){e.fillStyle="#888888",e.fillRect(t.x,t.y,t.width,t.height)}))}(e),x(e,q),q.forEach((function(e){e.mode=p;var t=q.filter((function(t){return Math.abs(t.x-e.x)<g&&Math.abs(t.y-e.y)<g&&t.id!==e.id})),i=t.filter((function(t){return A(t)&&t.id!==e.id})),n=i.filter((function(t){return N(t,e)}));if(n.length>0){var r=n[0];e.direction=Math.PI+Math.atan2(r.y-e.y,r.x-e.x),e.mode=P}var a=i.filter((function(t){return _(e,t)&&W(e,t)&&A(e)}));if(a.length>0){var o=a[0];e.direction=Math.atan2(o.y-e.y,o.x-e.x),e.mode=v}if(T){var c=t.filter((function(t){return N(e,t)}));if(c.length>0){var s=c[0];e.direction=Math.atan2(s.y-e.y,s.x-e.x),e.mode=m}}e.x>4e3&&(e.direction=Math.PI),e.x<0&&(e.direction=0),e.y>2e3&&(e.direction=3*Math.PI/2),e.y<0&&(e.direction=Math.PI/2),e.direction=-Math.PI/18+Math.random()*Math.PI/9+e.direction})),q.forEach((function(e){var t=e.x+Math.cos(e.direction)*e.speed,i=e.y+Math.sin(e.direction)*e.speed,n=!1;F.forEach((function(r){t>=r.x&&t<=r.x+r.width&&i>=r.y&&i<=r.y+r.height&&(e.direction=Math.PI+e.direction,n=!0)})),n||(e.x=t,e.y=i)})),U()}})})},V=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,28)).then((function(t){var i=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;i(e),n(e),r(e),a(e),o(e)}))};s.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(X,{})}),document.getElementById("root")),V()},9:function(e,t,i){e.exports={canvasSupport:"AntHill_canvasSupport__1XU9R"}}},[[25,1,2]]]);
//# sourceMappingURL=main.e332910c.chunk.js.map