(this.webpackJsonpfourmis=this.webpackJsonpfourmis||[]).push([[0],{13:function(e,t,i){e.exports={canvasSupport:"AntHill_canvasSupport__1XU9R"}},19:function(e,t,i){},28:function(e,t,i){},29:function(e,t,i){"use strict";i.r(t);for(var a,n=i(1),o=i(4),r=i.n(o),l=i(11),s=i.n(l),d=(i(19),i(5)),c=i(3),f=i(0),h=i(31),y=i(2),u=i(9),b=i.n(u),x=(i(28),i(12)),M=i(13),g=i.n(M),m=function(e){var t=Object(o.useRef)(null),i=e.draw,a=e.handleClick;return Object(o.useEffect)((function(){var e,n=t.current,o=n.getContext("2d"),r=0;n.addEventListener("click",(function(e){var t=n.getBoundingClientRect().width,i=n.getBoundingClientRect().height,o=4e3*e.clientX/t,r=2e3*e.clientY/i;a({canvasX:o,canvasY:r})}),!1);return function t(){r++,i(o,r),e=window.requestAnimationFrame(t)}(),function(){window.cancelAnimationFrame(e)}}),[i]),console.log(window.innerWidth/2),console.log(window.innerHeight/2),Object(n.jsx)("canvas",Object(x.a)({width:4e3,height:2e3,className:g.a.canvasSupport,ref:t},e))},S=function(e,t){e.strokeStyle="#331111",Y.forEach((function(t){e.beginPath(),e.fillRect(t.x,t.y,1,1)})),t.forEach((function(t){if(e.beginPath(),"elderly"===t.maturity){var i=y.hex.hsl(O[t.side].color.substring(1)),a=Object(d.a)(i,3),n=a[0],o=a[1],r=a[2];e.fillStyle="#".concat(y.hsl.hex(n,o/2,r-10))}else e.fillStyle=O[t.side].color;e.ellipse(t.x,t.y,2*p[t.maturity].size,p[t.maturity].size+p[t.maturity].size*Math.abs(t.oscillator),t.direction,0,2*Math.PI),e.fill(),A&&t.bredRest>0&&(e.strokeStyle="#ffffff",e.lineWidth=1,e.stroke()),X&&(t.food<500?(e.strokeStyle="#ff0000",e.lineWidth=3,e.stroke()):t.food<1e3?(e.strokeStyle="#ffff00",e.lineWidth=3,e.stroke()):t.food<2e3&&(e.strokeStyle="#00ff00",e.lineWidth=3,e.stroke())),e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x+Math.cos(t.direction)*p[t.maturity].size*2,t.y+Math.sin(t.direction)*p[t.maturity].size*2),e.lineWidth=1,e.strokeStyle=O[t.side].color,e.stroke(),z&&function(e,t){e.strokeStyle=O[t.side].color,e.fillStyle=O[t.side].color,e.lineWidth=.5,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x+Math.cos(t.direction-Math.PI/6)*p[t.maturity].size*10,t.y+Math.sin(t.direction-Math.PI/6)*p[t.maturity].size*10),e.lineWidth=1,e.strokeStyle=O[t.side].color,e.stroke(),e.lineWidth=.5,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x+Math.cos(t.direction+Math.PI/6)*p[t.maturity].size*10,t.y+Math.sin(t.direction+Math.PI/6)*p[t.maturity].size*10),e.lineWidth=1,e.strokeStyle=O[t.side].color,e.stroke()}(e,t),!F||"adult"!==t.maturity&&"elderly"!==t.maturity&&"child"!==t.maturity&&"baby"!==t.maturity||function(e,t){var i=y.hex.hsl(O[t.side].color.substring(1)),a=Object(d.a)(i,3);a[0],a[1],a[2],e.beginPath(),e.fillStyle="#ffffff",e.arc(t.x+Math.cos(t.direction+Math.PI/6)*p[t.maturity].size,t.y+Math.sin(t.direction+Math.PI/6)*p[t.maturity].size,4,0,2*Math.PI),e.arc(t.x+Math.cos(t.direction-Math.PI/6)*p[t.maturity].size,t.y+Math.sin(t.direction-Math.PI/6)*p[t.maturity].size,4,0,2*Math.PI),e.fill(),e.beginPath();var n,o=t.mode===k?2:3;switch(t.mode){case k:n="#000000";break;case v:n="#008000";break;case P:n="#ff0000";break;case w:n="#ff00ff";break;default:n="#000000"}e.fillStyle=n,e.arc(t.x+Math.cos(t.direction+Math.PI/6)*p[t.maturity].size,t.y+Math.sin(t.direction+Math.PI/6)*p[t.maturity].size,o,0,2*Math.PI),e.arc(t.x+Math.cos(t.direction-Math.PI/6)*p[t.maturity].size,t.y+Math.sin(t.direction-Math.PI/6)*p[t.maturity].size,o,0,2*Math.PI),e.fill()}(e,t),E&&function(e,t){e.lineWidth=.25,e.strokeRect(t.x-t.sensorArea/2,t.y-t.sensorArea/2,t.sensorArea,t.sensorArea),e.font="16px monospace",e.fillStyle=O[t.side].color,e.fillText("".concat(Math.floor(t.sensorArea)),t.x-t.sensorArea/2,t.y-t.sensorArea/2),e.fillText("".concat(Math.floor(10*t.speed)),t.x+t.sensorArea/2-12,t.y-t.sensorArea/2),e.fillText("".concat(Math.floor(t.generation)),t.x,t.y-t.sensorArea/2)}(e,t),t.isSelected&&(e.beginPath(),e.strokeStyle="#ff8888",e.fillStyle="#ffffff",e.arc(t.x,t.y,3*p[t.maturity].size,0,2*Math.PI),e.stroke())}))},k="NORMAL_MODE",v="FLEEING_MODE",P="HUNTING_MODE",w="MATING_MODE",C="HEN_SIDE",T="VIPER_SIDE",I="FOX_SIDE",O=(a={},Object(f.a)(a,C,{side:C,color:"#995500",canKill:Object(f.a)({},T,!0)}),Object(f.a)(a,T,{side:T,color:"#44CC44",canKill:Object(f.a)({},I,!0)}),Object(f.a)(a,I,{side:I,color:"#CC4444",canKill:Object(f.a)({},C,!0)}),a),p={newborn:{size:2},baby:{size:4},child:{size:5},adult:{size:8},elderly:{size:7}},j=!0,z=!1,A=!1,E=!1,F=!0,R=!0,D=!0,B=!1,G=!1,W=!0,_=!0,N=!1,X=!1,K=!1,L=!1,q=[[],[{x:100,y:1400,width:3800,height:10},{x:2e3,y:100,width:10,height:1300}],[{x:1900,y:0,width:200,height:950},{x:1900,y:1050,width:200,height:950}],[{x:2e3,y:0,width:10,height:2e3,isGate:!0},{x:0,y:1e3,width:4e3,height:10,isGate:!0}],[{x:2e3,y:0,width:10,height:2e3,isGate:!0},{x:1e3,y:1e3,width:2e3,height:10,isGate:!0},{x:1600,y:1e3,width:800,height:10},{x:1e3,y:600,width:10,height:800},{x:3e3,y:600,width:10,height:800},{x:1600,y:400,width:800,height:10},{x:1600,y:1600,width:800,height:10},{x:0,y:600,width:1e3,height:10},{x:3e3,y:1400,width:1e3,height:10}]],H=q[Math.floor(Math.random()*q.length)],Y=[],J=function(e,t){return e.side===t.side},U=function(e,t){return function(e,t){return Math.abs(t.x-e.x)<30&&Math.abs(t.y-e.y)<30}(e,t)&&function(e,t){return e.id!==t.id}(e,t)},V=function(e,t){return 0===e.bredRest&&0===t.bredRest},Q=function(e,t){return!!(K||"newborn"!==t.maturity&&"baby"!==t.maturity&&"child"!==t.maturity)&&(!(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))>e.reach)&&("adult"===e.maturity&&O[e.side].canKill[t.side]))},Z=function(e){return"adult"===e.maturity},$=function(){var e=Object.keys(O);return e[Math.floor(Math.random()*e.length)]},ee=function(e){var t=e.side;return{id:Object(h.a)(),name:b()(),x:Math.floor(3600*Math.random())+200,y:Math.floor(1600*Math.random())+200,direction:Math.PI/2,food:4e3,speed:1,energy:2,hitPoints:100,strength:40,reach:30,damageReduction:5,sensorArea:80,isTired:!1,color:"#44CCCC",canBreed:!1,bredRest:0,size:1,age:1,maturity:"child",generation:1,side:t||$()}},te=[],ie=0;ie<30;ie++)te=[].concat(Object(c.a)(te),[ee({side:T})]);for(var ae=0;ae<30;ae++)te=[].concat(Object(c.a)(te),[ee({side:C})]);for(var ne=0;ne<30;ne++)te=[].concat(Object(c.a)(te),[ee({side:I})]);document.addEventListener("keydown",(function(e){"v"===e.key&&(te=[].concat(Object(c.a)(te),[ee({side:T})])),"f"===e.key&&(te=[].concat(Object(c.a)(te),[ee({side:I})])),"h"===e.key&&(te=[].concat(Object(c.a)(te),[ee({side:C})])),"B"===e.key&&(D=!D),"b"===e.key&&(A=!A),"a"===e.key&&(j=!j),"s"===e.key&&(E=!E),"e"===e.key&&(F=!F),"k"===e.key&&(B=!B),"w"===e.key&&(R=!R),"d"===e.key&&(N=!N),"g"===e.key&&(G=!G),"o"===e.key&&(X=!X),"x"===e.key&&(_=!_),"c"===e.key&&(W=!W),"i"===e.key&&(K=!K)," "===e.key&&(L=!L)}),!1);var oe=function(){te.forEach((function(e){te.forEach((function(t){U(e,t)&&(D&&J(e,t)&&function(e,t){return e.canBreed&&t.canBreed}(e,t)&&V(e,t)?function(e,t){e.bredRest=400,t.bredRest=400;var i=y.hex.rgb(e.color.substring(1)),a=Object(d.a)(i,3),n=a[0],o=a[1],r=a[2],l=y.hex.rgb(t.color.substring(1)),s=Object(d.a)(l,3),f=s[0],u=s[1],x=s[2];e.brood=100,t.brood=100;var M=[Math.floor(Math.sqrt((n*n+f*f)/2)),Math.floor(Math.sqrt((o*o+u*u)/2)),Math.floor(Math.sqrt((r*r+x*x)/2))],g=Math.floor(e.speed+t.speed)/2-.5+Math.random(),m=Math.floor(Math.floor(e.sensorArea+t.sensorArea)/2-4+8*Math.random()),S=Math.floor(e.size+t.size)/2-.1+.2*Math.random(),v={id:Object(h.a)(),name:b()(),x:Math.floor(e.x+t.x)/2,y:Math.floor(e.y+t.y)/2,direction:0,brood:0,sensorArea:m>80?m:80,speed:g>1?g:1,energy:2,hitPoints:Math.floor((e.hitPoints+t.hitPoints)/2+10*Math.random()-5),strength:Math.floor((e.strength+t.strength)/2+4*Math.random()-2),reach:Math.floor((e.reach+t.reach)/2+4*Math.random()-2),damageReduction:Math.floor((e.damageReduction+t.damageReduction)/2),color:"#".concat(y.rgb.hex(M)),canBreed:!1,hasBred:!1,mode:k,size:S>1?S:1,age:0,bredRest:0,generation:e.generation>t.generation?e.generation+1:t.generation+1,food:Math.floor(e.food+t.food)/2+600,side:e.side};te=[].concat(Object(c.a)(te),[v])}(e,t):J(e,t)||Q(e,t)&&Z(e)&&(t.hitPoints=t.hitPoints-e.strength,t.hitPoints<=0&&(t.isDead=!0),Y.push({x:t.x,y:t.y}),e.food=e.food+t.food/2))}))}))},re=function(e){var t=e.canvasX,i=e.canvasY;te.forEach((function(e){return!1===e.isSelected})),te.forEach((function(e){e.maturity&&t>=e.x-3*p[e.maturity].size&&t<=e.x+3*p[e.maturity].size&&i>=e.y-3*p[e.maturity].size&&i<=e.y+3*p[e.maturity].size&&(console.log(e),e.isSelected=!0)}))};var le=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(m,{draw:function(e,t){L||(e.beginPath(),e.fillStyle="#202020",e.fillRect(0,0,e.canvas.width,e.canvas.height),function(e){e.font="36px serif",e.fillStyle="#ffffff";var t=te.filter((function(e){return e.side===I})).length,i=te.filter((function(e){return e.side===T})).length,a=te.filter((function(e){return e.side===C})).length;N?(e.fillStyle="#00FF00",e.fillText("Display debug (D) enabled",30,40),e.fillStyle="#CC4444",e.fillText("".concat(t," foxes, (F) to add"),30,80),e.fillStyle="#995500",e.fillText("".concat(a," hens, (H) to add"),30,120),e.fillStyle="#44CC44",e.fillText("".concat(i," vipers, (V) to add"),30,160),B?(e.fillStyle="#FF0000",e.fillText("Prey mode (K) enabled",30,200)):(e.fillStyle="#808080",e.fillText("Prey mode (K) disabled",30,200)),G?(e.fillStyle="#CCCCCC",e.fillText("Gate (G) enabled",30,240)):(e.fillStyle="#808080",e.fillText("Gate (G) disabled",30,240)),j?(e.fillStyle="#CCCCCC",e.fillText("Ants (A) displayed",30,280)):(e.fillStyle="#808080",e.fillText("Ants (A) hidden",30,280)),X?(e.fillStyle="#CCCCCC",e.fillText("Food (O) displayed",30,320)):(e.fillStyle="#808080",e.fillText("Food (O) hidden",30,320)),_?(e.fillStyle="#FF0000",e.fillText("Die on starvation (X) enabled",30,360)):(e.fillStyle="#808080",e.fillText("Die on starvation (X) disabled",30,360)),W?(e.fillStyle="#FF0000",e.fillText("Die on aging (C) enabled",30,400)):(e.fillStyle="#808080",e.fillText("Die on aging (C) disabled",30,400)),E?(e.fillStyle="#CCCC33",e.fillText("Sensor (S) displayed",30,440)):(e.fillStyle="#808080",e.fillText("Sensor (S) displayed",30,440)),K?(e.fillStyle="#FF0000",e.fillText("Allow to kill children (I) enabled",30,480)):(e.fillStyle="#808080",e.fillText("Allow to kill children (I) disabled",30,480)),D?(e.fillStyle="#00FF00",e.fillText("Allow to breed (+B) enabled",30,520)):(e.fillStyle="#FF0000",e.fillText("Allow to breed (+B) disabled",30,520))):(e.fillStyle="#808080",e.fillText("Display debug (D) disabled",30,40))}(e),function(e){te.forEach((function(t){t.oscillator=Math.cos(e/10),t.bredRest>0&&(t.bredRest=t.bredRest-1),t.age=t.age+1,t.age<200?t.maturity="newborn":t.age<400?t.maturity="baby":t.age<1200?t.maturity="child":t.age<8e3?(t.maturity="adult",t.canBreed=!0):t.age<1e4&&W?(t.maturity="elderly",t.canBreed=!1,t.energy=5):W&&(t.isDead=!0)}))}(t),te.forEach((function(e){e.food=e.food-1,e.food<=0&&_&&(e.isDead=!0)})),te=te.filter((function(e){return!e.isDead})),function(e){R&&H.forEach((function(t){t.isGate&&!G?e.fillStyle="#333333":e.fillStyle="#888888",e.fillRect(t.x,t.y,t.width,t.height)}))}(e),j&&S(e,te),te.forEach((function(e){e.brood>0?(e.brood=e.brood-1,e.isTired=!0):e.isTired=!1})),te.forEach((function(e){if(!e.isTired){e.mode=k;var t=te.filter((function(t){return Math.abs(t.x-e.x)<e.sensorArea&&Math.abs(t.y-e.y)<e.sensorArea&&t.id!==e.id})),i=t.filter((function(t){return Z(t)&&t.id!==e.id})),a=i.filter((function(t){return Q(t,e)}));if(a.length>0){var n=a[0];e.direction=Math.PI+Math.atan2(n.y-e.y,n.x-e.x),e.mode=v}var o=i.filter((function(t){return D&&J(e,t)&&V(e,t)&&Z(e)}));if(o.length>0){var r=o[0];e.direction=Math.atan2(r.y-e.y,r.x-e.x),e.mode=w}if(B||e.food<1e3){var l=t.filter((function(t){return Q(e,t)}));if(l.length>0){var s=l[0];e.direction=Math.atan2(s.y-e.y,s.x-e.x),e.mode=P}}e.x>4e3&&(e.direction=Math.PI),e.x<0&&(e.direction=0),e.y>2e3&&(e.direction=3*Math.PI/2),e.y<0&&(e.direction=Math.PI/2),e.direction=-Math.PI/18+Math.random()*Math.PI/9+e.direction}})),te.forEach((function(e){if(!e.isTired){var t;switch(e.maturity){case"newborn":t=0;break;case"baby":t=1;break;case"child":t=2;break;case"adult":t=3;break;case"elderly":t=1;break;default:t=1}var i=e.x+Math.cos(e.direction)*e.speed*t,a=e.y+Math.sin(e.direction)*e.speed*t,n=!1;H.forEach((function(t){if(t.isGate&&!G)return e.x=i,void(e.y=a);i>=t.x&&i<=t.x+t.width&&a>=t.y&&a<=t.y+t.height&&(e.direction=Math.PI+e.direction,n=!0)})),n||(e.x=i,e.y=a)}})),oe())},handleClick:re})})},se=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,32)).then((function(t){var i=t.getCLS,a=t.getFID,n=t.getFCP,o=t.getLCP,r=t.getTTFB;i(e),a(e),n(e),o(e),r(e)}))};s.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(le,{})}),document.getElementById("root")),se()}},[[29,1,2]]]);
//# sourceMappingURL=main.7f13fd7c.chunk.js.map