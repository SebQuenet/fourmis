(this.webpackJsonpfourmis=this.webpackJsonpfourmis||[]).push([[0],{13:function(e,t,i){e.exports={canvasSupport:"AntHill_canvasSupport__1XU9R"}},19:function(e,t,i){},28:function(e,t,i){},29:function(e,t,i){"use strict";i.r(t);for(var a,n=i(2),o=i(4),r=i.n(o),l=i(11),s=i.n(l),c=(i(19),i(5)),d=i(0),f=i(1),h=i(31),y=i(3),u=i(9),b=i.n(u),x=(i(28),i(12)),M=i(13),g=i.n(M),m=4e3,k=2e3,S=function(e){var t=Object(o.useRef)(null),i=e.draw,a=e.handleClick,r=e.handleMouseMove;return Object(o.useEffect)((function(){var e,n=t.current,o=n.getContext("2d"),l=0;n.addEventListener("mousemove",(function(e){var t=n.getBoundingClientRect().width,i=n.getBoundingClientRect().height,a=e.clientX*m/t,o=e.clientY*k/i;r({canvasX:a,canvasY:o})}),!1),n.addEventListener("click",(function(e){var t=n.getBoundingClientRect().width,i=n.getBoundingClientRect().height,o=e.clientX*m/t,r=e.clientY*k/i;a({canvasX:o,canvasY:r})}),!1);return function t(){l++,i(o,l),e=window.requestAnimationFrame(t)}(),function(){window.cancelAnimationFrame(e)}}),[i]),console.log(window.innerWidth/2),console.log(window.innerHeight/2),Object(n.jsx)("canvas",Object(x.a)({width:m,height:k,className:g.a.canvasSupport,ref:t},e))},P=function(e,t){e.strokeStyle="#331111",$.forEach((function(t){e.beginPath(),e.fillRect(t.x,t.y,1,1)})),t.forEach((function(t){if(e.beginPath(),"elderly"===t.maturity){var i=y.hex.hsl(A[t.side].color.substring(1)),a=Object(c.a)(i,3),n=a[0],o=a[1],r=a[2];e.fillStyle="#".concat(y.hsl.hex(n,o/2,r-10))}else e.fillStyle=A[t.side].color;e.ellipse(t.x,t.y,O[t.maturity].size*t.size*2,O[t.maturity].size*t.size+O[t.maturity].size*t.size*Math.abs(t.oscillator),t.direction,0,2*Math.PI),e.fill(),R&&t.bredRest>0&&(e.strokeStyle="#ffffff",e.lineWidth=1,e.stroke()),L&&(t.food<500?(e.strokeStyle="#ff0000",e.lineWidth=3,e.stroke()):t.food<1e3?(e.strokeStyle="#ffff00",e.lineWidth=3,e.stroke()):t.food<2e3&&(e.strokeStyle="#00ff00",e.lineWidth=3,e.stroke())),t.isInjuried&&(e.beginPath(),e.fillStyle="#ff0000",e.ellipse(t.x,t.y,O[t.maturity].size*t.size*2,O[t.maturity].size*t.size+O[t.maturity].size*t.size*Math.abs(t.oscillator),t.direction,Math.PI-Math.PI/3,Math.PI+Math.PI/3),e.fill()),e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x+Math.cos(t.direction)*O[t.maturity].size*t.size*2,t.y+Math.sin(t.direction)*O[t.maturity].size*t.size*2),e.lineWidth=1,e.strokeStyle=A[t.side].color,e.stroke(),F&&function(e,t){e.strokeStyle=A[t.side].color,e.fillStyle=A[t.side].color,e.lineWidth=.5,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x+Math.cos(t.direction-Math.PI/6)*O[t.maturity].size*t.size*10,t.y+Math.sin(t.direction-Math.PI/6)*O[t.maturity].size*t.size*10),e.lineWidth=1,e.strokeStyle=A[t.side].color,e.stroke(),e.lineWidth=.5,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x+Math.cos(t.direction+Math.PI/6)*O[t.maturity].size*t.size*10,t.y+Math.sin(t.direction+Math.PI/6)*O[t.maturity].size*t.size*10),e.lineWidth=1,e.strokeStyle=A[t.side].color,e.stroke()}(e,t),!B||"adult"!==t.maturity&&"elderly"!==t.maturity&&"child"!==t.maturity&&"baby"!==t.maturity||function(e,t){var i=y.hex.hsl(A[t.side].color.substring(1)),a=Object(c.a)(i,3);a[0],a[1],a[2],e.beginPath(),e.fillStyle="#ffffff",e.arc(t.x+Math.cos(t.direction+Math.PI/6)*O[t.maturity].size*t.size,t.y+Math.sin(t.direction+Math.PI/6)*O[t.maturity].size*t.size,4,0,2*Math.PI),e.arc(t.x+Math.cos(t.direction-Math.PI/6)*O[t.maturity].size*t.size,t.y+Math.sin(t.direction-Math.PI/6)*O[t.maturity].size*t.size,4,0,2*Math.PI),e.fill(),e.beginPath();var n,o=t.mode===v?2:3;switch(t.mode){case v:n="#000000";break;case z:n="#008000";break;case w:n="#ff0000";break;case p:n="#ff00ff";break;default:n="#000000"}e.fillStyle=n,e.arc(t.x+Math.cos(t.direction+Math.PI/6)*O[t.maturity].size*t.size,t.y+Math.sin(t.direction+Math.PI/6)*O[t.maturity].size*t.size,o,0,2*Math.PI),e.arc(t.x+Math.cos(t.direction-Math.PI/6)*O[t.maturity].size*t.size,t.y+Math.sin(t.direction-Math.PI/6)*O[t.maturity].size*t.size,o,0,2*Math.PI),e.fill()}(e,t),D&&function(e,t){e.lineWidth=.25,e.strokeRect(t.x-t.sensorArea/2,t.y-t.sensorArea/2,t.sensorArea,t.sensorArea),e.font="16px monospace",e.fillStyle=A[t.side].color,e.fillText("".concat(Math.floor(t.sensorArea)),t.x-t.sensorArea/2,t.y-t.sensorArea/2),e.fillText("".concat(Math.floor(10*t.speed)),t.x+t.sensorArea/2-12,t.y-t.sensorArea/2),e.fillText("".concat(Math.floor(t.generation)),t.x,t.y-t.sensorArea/2)}(e,t),t.isSelected&&(e.beginPath(),e.strokeStyle="#ff8888",e.fillStyle="#ffffff",e.lineWidth=3,e.arc(t.x,t.y,O[t.maturity].size*t.size*3,0,2*Math.PI),e.stroke())}))},v="NORMAL_MODE",z="FLEEING_MODE",w="HUNTING_MODE",p="MATING_MODE",C="HEN_SIDE",I="VIPER_SIDE",T="FOX_SIDE",j=null,A=(a={},Object(f.a)(a,C,{side:C,color:"#995500",canKill:Object(f.a)({},I,!0)}),Object(f.a)(a,I,{side:I,color:"#44CC44",canKill:Object(f.a)({},T,!0)}),Object(f.a)(a,T,{side:T,color:"#CC4444",canKill:Object(f.a)({},C,!0)}),a),O={newborn:{size:2},baby:{size:4},child:{size:5},adult:{size:8},elderly:{size:7}},E=!0,F=!1,R=!1,D=!1,B=!0,W=!0,H=!0,G=!1,_=!1,N=!0,K=!0,X=!1,L=!1,q=!1,Y=!1,V=[[],[{x:100,y:1400,width:3800,height:10},{x:2e3,y:100,width:10,height:1300}],[{x:1900,y:0,width:200,height:950},{x:1900,y:1050,width:200,height:950}],[{x:2e3,y:0,width:10,height:2e3,isGate:!0},{x:0,y:1e3,width:4e3,height:10,isGate:!0}],[{x:2e3,y:0,width:10,height:2e3,isGate:!0},{x:1e3,y:1e3,width:2e3,height:10,isGate:!0},{x:1600,y:1e3,width:800,height:10},{x:1e3,y:600,width:10,height:800},{x:3e3,y:600,width:10,height:800},{x:1600,y:400,width:800,height:10},{x:1600,y:1600,width:800,height:10},{x:0,y:600,width:1e3,height:10},{x:3e3,y:1400,width:1e3,height:10}]],J=0,U=0,Q=function(e){var t=e.canvasX,i=e.canvasY;J=t,U=i},Z=V[Math.floor(Math.random()*V.length)],$=[],ee=function(e,t){return e.side===t.side},te=function(e,t){return function(e,t){return Math.abs(t.x-e.x)<30&&Math.abs(t.y-e.y)<30}(e,t)&&function(e,t){return e.id!==t.id}(e,t)},ie=function(e,t){return 0===e.bredRest&&0===t.bredRest},ae=function(e,t){return!!(q||"newborn"!==t.maturity&&"baby"!==t.maturity&&"child"!==t.maturity)&&("adult"===e.maturity&&A[e.side].canKill[t.side])},ne=function(e){return"adult"===e.maturity},oe=function(){var e=Object.keys(A);return e[Math.floor(Math.random()*e.length)]},re=function(e){var t=e.side,i=e.x,a=e.y;return{id:Object(h.a)(),name:b()(),x:i||Math.floor(3600*Math.random())+200,y:a||Math.floor(1600*Math.random())+200,direction:Math.PI/2,food:4e3,speed:1,energy:2,hitPoints:100,maxHitPoints:100,strength:40,reach:30,damageReduction:5,sensorArea:80,trackingArea:80,perceptionArea:80,isTired:!1,color:"#44CCCC",canBreed:!1,bredRest:0,size:1,age:1,maturity:"child",generation:1,side:t||oe()}},le=[],se=0;se<30;se++)le=[].concat(Object(d.a)(le),[re({side:I})]);for(var ce=0;ce<30;ce++)le=[].concat(Object(d.a)(le),[re({side:C})]);for(var de=0;de<30;de++)le=[].concat(Object(d.a)(le),[re({side:T})]);document.addEventListener("keydown",(function(e){"v"===e.key&&(le=[].concat(Object(d.a)(le),[re({side:I})])),"V"===e.key&&(le=[].concat(Object(d.a)(le),[re({side:I,x:J,y:U})])),"f"===e.key&&(le=[].concat(Object(d.a)(le),[re({side:T})])),"F"===e.key&&(le=[].concat(Object(d.a)(le),[re({side:T,x:J,y:U})])),"h"===e.key&&(le=[].concat(Object(d.a)(le),[re({side:C})])),"H"===e.key&&(le=[].concat(Object(d.a)(le),[re({side:C,x:J,y:U})])),"B"===e.key&&(H=!H),"b"===e.key&&(R=!R),"a"===e.key&&(E=!E),"s"===e.key&&(D=!D),"e"===e.key&&(B=!B),"k"===e.key&&(G=!G),"w"===e.key&&(W=!W),"d"===e.key&&(X=!X),"g"===e.key&&(_=!_),"o"===e.key&&(L=!L),"x"===e.key&&(K=!K),"c"===e.key&&(N=!N),"i"===e.key&&(q=!q)," "===e.key&&(Y=!Y),e.key,"K"===e.key&&(le=[]),">"===e.key&&(Z=V[Math.floor(Math.random()*V.length)])}),!1);var fe=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))};var he=function(){le.forEach((function(e){le.forEach((function(t){te(e,t)&&(H&&ee(e,t)&&function(e,t){return e.canBreed&&t.canBreed}(e,t)&&ie(e,t)?function(e,t){e.bredRest=400,t.bredRest=400;var i=y.hex.rgb(e.color.substring(1)),a=Object(c.a)(i,3),n=a[0],o=a[1],r=a[2],l=y.hex.rgb(t.color.substring(1)),s=Object(c.a)(l,3),f=s[0],u=s[1],x=s[2];e.brood=100,t.brood=100;var M=[Math.floor(Math.sqrt((n*n+f*f)/2)),Math.floor(Math.sqrt((o*o+u*u)/2)),Math.floor(Math.sqrt((r*r+x*x)/2))],g=Math.floor(e.speed+t.speed)/2-.5+Math.random(),m=Math.floor(Math.floor(e.sensorArea+t.sensorArea)/2-4+8*Math.random()),k=Math.floor(Math.floor(e.trackingArea+t.trackingArea)/2-4+8*Math.random()),S=Math.floor(Math.floor(e.perceptionArea+t.perceptionArea)/2-4+8*Math.random()),P=Math.floor(e.size+t.size)/2-.2+.4*Math.random(),z={id:Object(h.a)(),name:b()(),x:Math.floor(e.x+t.x)/2,y:Math.floor(e.y+t.y)/2,direction:0,brood:0,sensorArea:m>80?m:80,trackingArea:k>0?k:0,perceptionArea:S>0?S:0,speed:g>1?g:1,energy:2,hitPoints:Math.floor((e.hitPoints+t.hitPoints)/2+10*Math.random()-5),maxHitPoints:Math.floor(e.maxHitPoints+t.maxHitPoints)/2,strength:Math.floor((e.strength+t.strength)/2+4*Math.random()-2),reach:Math.floor((e.reach+t.reach)/2+4*Math.random()-2),damageReduction:Math.floor((e.damageReduction+t.damageReduction)/2),color:"#".concat(y.rgb.hex(M)),canBreed:!1,hasBred:!1,mode:v,size:P>1?P:1,age:0,bredRest:0,generation:e.generation>t.generation?e.generation+1:t.generation+1,food:Math.floor(e.food+t.food)/2+700,side:e.side};le=[].concat(Object(d.a)(le),[z])}(e,t):ee(e,t)||function(e,t){return!!(q||"newborn"!==t.maturity&&"baby"!==t.maturity&&"child"!==t.maturity)&&!(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))>e.reach)&&"adult"===e.maturity&&A[e.side].canKill[t.side]}(e,t)&&ne(e)&&(t.hitPoints=t.hitPoints-e.strength,t.hitPoints<=0?(t.isDead=!0,$.push({x:t.x,y:t.y}),e.food=e.food+t.food):t.isInjuried=!0))}))}))},ye=function(e){var t=e.canvasX,i=e.canvasY;console.log(j),le.forEach((function(e){return!1===e.isSelected})),console.log(le.find((function(e){return e.isSelected}))),le.forEach((function(e){e.maturity?t>=e.x-3*O[e.maturity].size&&t<=e.x+3*O[e.maturity].size&&i>=e.y-3*O[e.maturity].size&&i<=e.y+3*O[e.maturity].size?(console.log(e),e.isSelected=!0,j=e):j=null:console.log("No maturity for ant",e)}))};var ue=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(S,{draw:function(e,t){Y||(e.beginPath(),e.fillStyle="#202020",e.fillRect(0,0,e.canvas.width,e.canvas.height),function(e){e.font="36px serif",e.fillStyle="#ffffff";var t=le.filter((function(e){return e.side===T})).length,i=le.filter((function(e){return e.side===I})).length,a=le.filter((function(e){return e.side===C})).length;X?(e.fillStyle="#00FF00",e.fillText("Display debug (d) enabled",30,40),e.fillStyle="#CC4444",e.fillText("".concat(t," foxes, (f) to add (F) on cursor"),30,80),e.fillStyle="#995500",e.fillText("".concat(a," hens, (h) to add (H) on cursor"),30,120),e.fillStyle="#44CC44",e.fillText("".concat(i," vipers, (v) to add (V) on cursor"),30,160),G?(e.fillStyle="#FF0000",e.fillText("Prey mode (k) enabled",30,200)):(e.fillStyle="#808080",e.fillText("Prey mode (k) disabled",30,200)),_?(e.fillStyle="#CCCCCC",e.fillText("Gate (g) enabled",30,240)):(e.fillStyle="#808080",e.fillText("Gate (g) disabled",30,240)),E?(e.fillStyle="#CCCCCC",e.fillText("Ants (a) displayed",30,280)):(e.fillStyle="#808080",e.fillText("Ants (a) hidden",30,280)),L?(e.fillStyle="#CCCCCC",e.fillText("Food (o) displayed",30,320)):(e.fillStyle="#808080",e.fillText("Food (o) hidden",30,320)),K?(e.fillStyle="#FF0000",e.fillText("Die on starvation (x) enabled",30,360)):(e.fillStyle="#808080",e.fillText("Die on starvation (x) disabled",30,360)),N?(e.fillStyle="#FF0000",e.fillText("Die on aging (c) enabled",30,400)):(e.fillStyle="#808080",e.fillText("Die on aging (c) disabled",30,400)),D?(e.fillStyle="#CCCC33",e.fillText("Sensor (s) displayed",30,440)):(e.fillStyle="#808080",e.fillText("Sensor (s) displayed",30,440)),q?(e.fillStyle="#FF0000",e.fillText("Allow to kill children (i) enabled",30,480)):(e.fillStyle="#808080",e.fillText("Allow to kill children (i) disabled",30,480)),H?(e.fillStyle="#00FF00",e.fillText("Allow to breed (B) enabled",30,520)):(e.fillStyle="#FF0000",e.fillText("Allow to breed (B) disabled",30,520)),e.fillStyle="#880000",e.fillText("Kill everybody, (K)",30,560),e.fillStyle="#808080",e.fillText("Randomize walls, (>)",30,600)):(e.fillStyle="#808080",e.fillText("Display debug (d) disabled",30,40))}(e),function(e){le.forEach((function(t){t.oscillator=Math.cos(e/10),t.hitPoints<t.maxHitPoints&&(t.hitPoints+=.25,t.hitPoints>=t.maxHitPoints&&(t.isInjuried=!1)),t.bredRest>0&&(t.bredRest=t.bredRest-1),t.age=t.age+1,t.age<200?t.maturity="newborn":t.age<400?t.maturity="baby":t.age<1200?t.maturity="child":t.age<8e3?(t.maturity="adult",t.canBreed=!0):t.age<1e4&&N?(t.maturity="elderly",t.canBreed=!1,t.energy=5):N&&(t.isDead=!0)}))}(t),le.forEach((function(e){e.food=e.food-1,e.food<=0&&K&&(e.isDead=!0)})),le=le.filter((function(e){return!e.isDead})),function(e){W&&Z.forEach((function(t){t.isGate&&!_?e.fillStyle="#333333":e.fillStyle="#888888",e.fillRect(t.x,t.y,t.width,t.height)}))}(e),E&&P(e,le),le.forEach((function(e){e.brood>0?(e.brood=e.brood-1,e.isTired=!0):e.isTired=!1})),le.forEach((function(e){e.mode=v,e.preys=le.filter((function(t){return t.id!==e.id&&ae(e,t)&&fe(e,t)<e.trackingArea})),e.predators=le.filter((function(t){return t.id!==e.id&&ae(e,t)&&fe(e,t)<e.perceptionArea}))})),le.forEach((function(e){if(!e.isTired){e.mode=v;var t=le.filter((function(t){return Math.abs(t.x-e.x)<e.sensorArea&&Math.abs(t.y-e.y)<e.sensorArea&&t.id!==e.id})),i=t.filter((function(t){return ne(t)&&t.id!==e.id})),a=i.filter((function(t){return ae(t,e)}));if(a.length>0){var n=a[0];e.direction=Math.PI+Math.atan2(n.y-e.y,n.x-e.x),e.mode=z}var o=i.filter((function(t){return H&&ee(e,t)&&ie(e,t)&&ne(e)}));if(o.length>0){var r=o[0];e.direction=Math.atan2(r.y-e.y,r.x-e.x),e.mode=p}if(G||e.food<1e3){var l=t.filter((function(t){return ae(e,t)}));if(l.length>0){var s=l[0];e.direction=Math.atan2(s.y-e.y,s.x-e.x),e.mode=w}}e.x>4e3&&(e.direction=Math.PI),e.x<0&&(e.direction=0),e.y>2e3&&(e.direction=3*Math.PI/2),e.y<0&&(e.direction=Math.PI/2),e.direction=-Math.PI/18+Math.random()*Math.PI/9+e.direction}})),le.forEach((function(e){if(!e.isTired){var t;switch(e.maturity){case"newborn":t=0;break;case"baby":t=1;break;case"child":t=2;break;case"adult":t=3;break;case"elderly":t=1;break;default:t=1}var i=e.isInjuried?2/3:1,a=e.x+Math.cos(e.direction)*e.speed*t*i,n=e.y+Math.sin(e.direction)*e.speed*t*i,o=!1;Z.forEach((function(t){if(t.isGate&&!_)return e.x=a,void(e.y=n);a>=t.x&&a<=t.x+t.width&&n>=t.y&&n<=t.y+t.height&&(e.direction=Math.PI+e.direction,o=!0)})),o||(e.x=a,e.y=n)}})),he(),function(e){null!==j&&(e.beginPath(),e.strokeStyle="#FFFF00",e.lineWidth=2,e.fillStyle="#000000",e.rect(3e3,0,1e3,1e3),e.fill(),e.stroke())}(e))},handleClick:ye,handleMouseMove:Q})})},be=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,32)).then((function(t){var i=t.getCLS,a=t.getFID,n=t.getFCP,o=t.getLCP,r=t.getTTFB;i(e),a(e),n(e),o(e),r(e)}))};s.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(ue,{})}),document.getElementById("root")),be()}},[[29,1,2]]]);
//# sourceMappingURL=main.61f1e313.chunk.js.map